<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, target-densitydpi=device-dpi"/>
    <meta name="apple-mobile-web-app-capable" content="no"/>
    <meta name="wap-font-scale" content="no">
    <meta content="telephone=no" name="format-detection">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>2017七夕</title>
    <link rel="stylesheet" href="css/public.phone.min.css"/>
    <link rel="stylesheet" href="css/swiper.min.css">
    <link rel="stylesheet" href="css/css.css"/>
</head>
<body class="main-body">
<div class="header">
    <h2 class="lottery-title">
        <a class="lottery-back" href="javascript:;">返回</a>
        <span>唯爱而购 浪漫七夕惠</span>
        <a class="lottery-share" href="javascript:;">分享</a>
    </h2>
    <div class="lottery-menu active">
        <div class="menu-container">
            <div class="swiper-container" id="inNav">
                <div class="swiper-wrapper">
                    <div class="swiper-slide active" data-floor="floor1">专属浪漫</div>
                    <div class="swiper-slide " data-floor="floor2">七夕特惠</div>
                    <div class="swiper-slide " data-floor="floor3">美食传情</div>
                    <div class="swiper-slide " data-floor="floor4">绽放味蕾</div>
                </div>
            </div>
        </div>
    </div>
    <div class="banner">
        <img src="img/banner.jpg">
    </div>
</div>
<div class="container">
    <div class="container-floor recommend-product" id="floor1" data-floor="1F">
        <div class="hot-product-title"><img src="img/title1.jpg"></div>
        <div class="hot-product-list">
            <ul class="clearfix">
                <li><a href="#"><img src="img/product-big.png"></a></li>
                <li><a href="#"><img src="img/product-big.png"></a></li>
                <li><a href="#"><img src="img/product-big.png"></a></li>
                <li><a href="#"><img src="img/product-big.png"></a></li>
            </ul>
        </div>
    </div>
    <div class="container-floor recommend-product" id="floor2" data-floor="2F">
        <div class="recommend-title"><img src="img/title2.jpg"></div>
        <div class="product-list">
            <ul class="pad clearfix">
                <li>
                    <a href="#">
                        <em class="icon-active"><img src="img/icon-active.png"></em>
                        <div class="pro-img"><img src="img/pro1.jpg"></div>
                        <div class="pro-intro">
                            <p class="pro-name text-overflow">王茂生水果味桃片糕散 装500g</p>
                            <div class="pro-price">
                                <p class="pro-new-price">
                                    <label><i>¥</i>25.00</label>
                                </p>
                                <p class="pro-old-price">¥29.00</p>
                            </div>

                            <label class="carBtn buy-btn"><span>立即购买</span></label>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <div class="pro-img"><img src="img/pro2.jpg"></div>
                        <div class="pro-intro">
                            <p class="pro-name text-overflow">王茂生水果味桃片糕散 装500g</p>
                            <div class="pro-price">
                                <p class="pro-new-price">
                                    <label><i>¥</i>25.00</label>
                                </p>
                                <p class="pro-old-price">¥29.00</p>
                            </div>

                            <label class="carBtn buy-btn"><span>立即购买</span></label>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <div class="pro-img"><img src="img/pro3.jpg"></div>
                        <div class="pro-intro">
                            <p class="pro-name text-overflow">王茂生水果味桃片糕散 装500g</p>
                            <div class="pro-price">
                                <p class="pro-new-price">
                                    <label><i>¥</i>25.00</label>
                                </p>
                                <p class="pro-old-price">¥29.00</p>
                            </div>

                            <label class="carBtn buy-btn"><span>立即购买</span></label>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <div class="pro-img"><img src="img/pro4.jpg"></div>
                        <div class="pro-intro">
                            <p class="pro-name text-overflow">王茂生水果味桃片糕散 装500g</p>
                            <div class="pro-price">
                                <p class="pro-new-price">
                                    <label><i>¥</i>25.00</label>
                                </p>
                                <p class="pro-old-price">¥29.00</p>
                            </div>

                            <label class="carBtn buy-btn"><span>立即购买</span></label>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <div class="pro-img"><img src="img/pro1.jpg"></div>
                        <div class="pro-intro">
                            <p class="pro-name text-overflow">王茂生水果味桃片糕散 装500g</p>
                            <div class="pro-price">
                                <p class="pro-new-price">
                                    <label><i>¥</i>25.00</label>
                                </p>
                                <p class="pro-old-price">¥29.00</p>
                            </div>

                            <label class="carBtn buy-btn"><span>立即购买</span></label>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <div class="pro-img"><img src="img/pro2.jpg"></div>
                        <div class="pro-intro">
                            <p class="pro-name text-overflow">王茂生水果味桃片糕散 装500g</p>
                            <div class="pro-price">
                                <p class="pro-new-price">
                                    <label><i>¥</i>25.00</label>
                                </p>
                                <p class="pro-old-price">¥29.00</p>
                            </div>

                            <label class="carBtn buy-btn"><span>立即购买</span></label>
                        </div>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="container-floor recommend-product" id="floor3" data-floor="3F">
        <h2 class="recommend-title"><img src="img/title3.jpg"></h2>
        <div class="product-list">
            <ul class="pad clearfix">
                <li>
                    <a href="#">
                        <div class="pro-img"><img src="img/pro1.jpg"></div>
                        <div class="pro-intro">
                            <p class="pro-name text-overflow">王茂生水果味桃片糕散 装500g</p>
                            <div class="pro-price">
                                <p class="pro-new-price">
                                    <label><i>¥</i>25.00</label>
                                </p>
                                <p class="pro-old-price">¥29.00</p>
                            </div>

                            <label class="carBtn buy-btn"><span>立即购买</span></label>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <div class="pro-img"><img src="img/pro2.jpg"></div>
                        <div class="pro-intro">
                            <p class="pro-name text-overflow">王茂生水果味桃片糕散 装500g</p>
                            <div class="pro-price">
                                <p class="pro-new-price">
                                    <label><i>¥</i>25.00</label>
                                </p>
                                <p class="pro-old-price">¥29.00</p>
                            </div>

                            <label class="carBtn buy-btn"><span>立即购买</span></label>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <div class="pro-img"><img src="img/pro3.jpg"></div>
                        <div class="pro-intro">
                            <p class="pro-name text-overflow">王茂生水果味桃片糕散 装500g</p>
                            <div class="pro-price">
                                <p class="pro-new-price">
                                    <label><i>¥</i>25.00</label>
                                </p>
                                <p class="pro-old-price">¥29.00</p>
                            </div>

                            <label class="carBtn buy-btn"><span>立即购买</span></label>
                        </div>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="container-floor recommend-product" id="floor4" data-floor="4F">
        <div class="recommend-title"><img src="img/title4.jpg"></div>
        <div class="product-list">
            <ul class="pad clearfix">
                <li>
                    <a href="#">
                        <div class="pro-img"><img src="img/pro4.jpg"></div>
                        <div class="pro-intro">
                            <p class="pro-name text-overflow">王茂生水果味桃片糕散 装500g</p>
                            <div class="pro-price">
                                <p class="pro-new-price">
                                    <label><i>¥</i>25.00</label>
                                </p>
                                <p class="pro-old-price">¥29.00</p>
                            </div>

                            <label class="carBtn buy-btn"><span>立即购买</span></label>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <div class="pro-img"><img src="img/pro1.jpg"></div>
                        <div class="pro-intro">
                            <p class="pro-name text-overflow">王茂生水果味桃片糕散 装500g</p>
                            <div class="pro-price">
                                <p class="pro-new-price">
                                    <label><i>¥</i>25.00</label>
                                </p>
                                <p class="pro-old-price">¥29.00</p>
                            </div>

                            <label class="carBtn buy-btn"><span>立即购买</span></label>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <div class="pro-img"><img src="img/pro2.jpg"></div>
                        <div class="pro-intro">
                            <p class="pro-name text-overflow">王茂生水果味桃片糕散 装500g</p>
                            <div class="pro-price">
                                <p class="pro-new-price">
                                    <label><i>¥</i>25.00</label>
                                </p>
                                <p class="pro-old-price">¥29.00</p>
                            </div>

                            <label class="carBtn buy-btn"><span>立即购买</span></label>
                        </div>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>

<a class="pos-fix go-top" href="javascript:;" id="goTop"><img src="img/icon-goTop.png"></a>

<script src="js/jquery-1.11.1.min.js"></script>
<script src="js/swiper.jquery.min.js"></script>
<script>
    $(function () {
        //初始化菜单
        var navSwiper = new Swiper("#inNav", {
            freeMode: true,
            slidesPerView: "auto",
            lazyLoading: true,
            watchSlidesVisibility: true
        });

        //菜单操作
        var navBox = $("#inNav");
        var navEle = $("#inNav").find(".swiper-slide");
        var navActiveEle = $("#inNav").find(".swiper-slide.active");

        //初始化菜单
        (function navInit() {
            var w_w = $(window).width();
            var _dom = navActiveEle;
            var i = _dom.index();
            var _left = _dom.offset().left;
            if (_left > w_w) {
                navSwiper.slideTo((i - 1), 100, false);
            }
        })();

        //菜单点击
        var _is_click = false;
        navEle.click(function () {
            $(this).addClass("active").siblings().removeClass("active");
            var _curBar = navBox.find(".swiper-slide.active");
            var _width = _curBar.offset().left + _curBar[0].offsetWidth + 60;
            if (_width > $(window).width()) {
                navSwiper.slideNext();
            } else if ((_width - 60) < _curBar[0].offsetWidth * 2) {
                navSwiper.slidePrev();
            }
            var id = "#" + $(this).data("floor");
            var top = $(id).offset().top;
            scrollToEle(top - 80);
        });

        (function loadProduct() {
            var $ele = $(".container-floor");
            var doc_top = $(".lottery-menu").offset().top - 36;
            $(window).scroll(function () {
                var _win_height = $(this).height();
                var top = $(this).scrollTop();
                if (top > doc_top) {
                    $("#goTop").fadeIn();
                } else {
                    $("#goTop").fadeOut();
                }

                if (!_is_click) {
                    var next_height = $(document).height();
                    var index = 0;
                    $ele.each(function (i) {
                        if ($ele.eq(i + 1).height() == null) {
                            index = $ele.length - 1;
                            next_height = $(document).height();
                        } else {
                            next_height = $ele.eq(i + 1).offset().top;
                            index = i;
                        }
                        if ((top + _win_height * 1 / 2) > $(this).offset().top && (top + _win_height * 1 / 2) < next_height) {
                            navSwiper.slideTo(index - 1);
                            navEle.eq(index).addClass("active").siblings().removeClass("active");
                        }
                    });
                }
            });
        })();

        $("#goTop").click(function () {
            scrollToEle(0);
            navSwiper.slideTo(0);
            navEle.eq(0).addClass("active").siblings().removeClass("active");
        });


        function scrollToEle(top) {
            _is_click = true;
            $("html,body").animate({"scrollTop": top + "px"}, 500, function () {
                _is_click = false;
            });
        }
    })
</script>
</body>
</html>